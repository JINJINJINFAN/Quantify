<!-- å¿«é€Ÿæ“ä½œç»„ä»¶ -->
<div class="card">
    <div class="card-header">
        <h5 class="mb-0">
            <i class="fas fa-bolt me-2"></i>{{ title or 'å¿«é€Ÿæ“ä½œ' }}
        </h5>
    </div>
    <div class="card-body">
        <div class="d-grid gap-2">
            {% if actions %}
                {% for action in actions %}
                <button type="button" class="btn btn-outline-{{ action.color or 'primary' }}" onclick="{{ action.onclick }}">
                    <i class="fas fa-{{ action.icon }} me-1"></i>{{ action.label }}
                </button>
                {% endfor %}
            {% else %}
                <!-- é»˜è®¤å¿«é€Ÿæ“ä½œ -->
                <button type="button" class="btn btn-outline-primary" onclick="checkSignal()">
                    <i class="fas fa-search me-1"></i>æ£€æŸ¥ä¿¡å·
                </button>
                <button type="button" class="btn btn-outline-success" onclick="viewPositions()">
                    <i class="fas fa-chart-bar me-1"></i>æŸ¥çœ‹æŒä»“
                </button>
                <button type="button" class="btn btn-outline-info" onclick="viewTrades()">
                    <i class="fas fa-exchange-alt me-1"></i>æŸ¥çœ‹äº¤æ˜“
                </button>
                <button type="button" class="btn btn-outline-warning" onclick="viewLogs()">
                    <i class="fas fa-file-alt me-1"></i>æŸ¥çœ‹æ—¥å¿—
                </button>
            {% endif %}
        </div>
    </div>
</div>

<script>
// é»˜è®¤å¿«é€Ÿæ“ä½œå‡½æ•°
function checkSignal() {
    fetch('/api/signal')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                utils.showMessage('ä¿¡å·æ£€æŸ¥å®Œæˆ', 'success');
            } else {
                utils.showMessage('ä¿¡å·æ£€æŸ¥å¤±è´¥: ' + data.message, 'danger');
            }
        })
        .catch(error => {
            utils.showMessage('ä¿¡å·æ£€æŸ¥å¼‚å¸¸: ' + error.message, 'danger');
        });
}

function viewPositions() {
    window.location.href = '/positions';
}

function viewTrades() {
    window.location.href = '/trades';
}

function viewLogs() {
    window.location.href = '/logs';
}

function viewConfig() {
    window.location.href = '/config';
}

function viewAccount() {
    window.location.href = '/account';
}

function emergencyStop() {
    if (confirm('ç¡®å®šè¦ç´§æ€¥åœæ­¢ç³»ç»Ÿå—ï¼Ÿ')) {
        fetch('/api/emergency_stop', { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    utils.showMessage('ç´§æ€¥åœæ­¢æˆåŠŸ', 'success');
                    setTimeout(() => location.reload(), 1000);
                } else {
                    utils.showMessage('ç´§æ€¥åœæ­¢å¤±è´¥: ' + data.message, 'danger');
                }
            })
            .catch(error => {
                utils.showMessage('ç´§æ€¥åœæ­¢å¼‚å¸¸: ' + error.message, 'danger');
            });
    }
}

function forceClosePosition() {
    utils.showMessage('ğŸš« ç³»ç»Ÿå·²è®¾ç½®ä¸ºå¼ºåˆ¶ä¿æŒä»“ä½é€€å‡ºï¼Œä¸å…è®¸å¼ºåˆ¶å¹³ä»“', 'warning');
}
</script> 